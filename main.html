<!DOCTYPE html>
<html lang="cs" class="scroll-smooth">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jan Spilka | Fotograf & Videotvůrce</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Fonts -->
    <link
        href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600&family=Playfair+Display:ital,wght@0,400;0,700;1,400&display=swap"
        rel="stylesheet">
    <!-- Font Awesome Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'gold': '#D4AF37',
                        'dark-bg': '#0f0f0f',
                        'card-bg': '#1a1a1a',
                        'card-hover': '#252525',
                    },
                    fontFamily: {
                        sans: ['Montserrat', 'sans-serif'],
                        serif: ['Playfair Display', 'serif'],
                    }
                }
            }
        }
    </script>
    <style>
        /* Custom scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: #0f0f0f;
        }

        ::-webkit-scrollbar-thumb {
            background: #333;
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #D4AF37;
        }

        .image-hover-zoom {
            transition: transform 0.5s ease;
        }

        .group:hover .image-hover-zoom {
            transform: scale(1.05);
        }

        /* Fade in animation classes */
        .fade-in {
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.6s ease-out, transform 0.6s ease-out;
        }

        .fade-in.visible {
            opacity: 1;
            transform: translateY(0);
        }

        /* Gallery Filter Active State */
        .filter-btn.active {
            background-color: #D4AF37;
            color: black;
            border-color: #D4AF37;
        }
    </style>
</head>

<body class="bg-dark-bg text-gray-200 font-sans antialiased">

    <!-- Navigation -->
    <div data-include="components/navbar.html"></div>

    <!-- Hero Section -->
    <div data-include="components/hero.html"></div>

    <!-- About Section -->
    <div data-include="components/about.html"></div>

    <!-- Calendars Section -->
    <div data-include="components/calendars.html"></div>

    <!-- Services / Prices Section -->
    <div data-include="components/services.html"></div>

    <!-- Gallery Section -->
    <div data-include="components/gallery.html"></div>

    <!-- Blog Section -->
    <div data-include="components/blog.html"></div>

    <!-- Contact Section -->
    <div data-include="components/contact.html"></div>

    <!-- Footer -->
    <div data-include="components/footer.html"></div>

    <!-- Modals -->
    <div data-include="components/modals.html"></div>

    <script>
        // --- Component Loader ---
        async function loadComponents() {
            const includes = document.querySelectorAll('[data-include]');
            for (const el of includes) {
                try {
                    const file = el.getAttribute('data-include');
                    const response = await fetch(file);
                    if (response.ok) {
                        el.innerHTML = await response.text();
                        // Unwrap the div to avoid extra container if preferred, 
                        // but keeping it acts as a wrapper.
                        // For this layout, wrapper divs might break layout if flex/grid is expected.
                        // Let's replace the placeholder with the content nodes.
                        const content = el.content; // text isn't content
                        // Actually, el.innerHTML = text puts elements inside the div.
                        // To preserve layout structure exactly as before, we might want to unwrap.
                        // However, 'main.html' had <nav>, <section> etc.
                        // So <div data-include> -> <section> is fine.
                        // <div data-include> might break some "child > *" selectors if any.
                        // Checking CSS... Tailwind classes usually on the element itself.
                        // "Navbar" is "fixed", so wrapping it in a relative/static div is OK 
                        // as long as the nav itself has 'fixed'.
                    } else {
                        console.error('Failed to load', file);
                    }
                } catch (e) {
                    console.error('Error loading component', e);
                }
            }

            // Re-initialize scripts after content is loaded
            initializeScripts();
        }

        function initializeScripts() {
            // --- Navbar Scroll Effect ---
            const navbar = document.getElementById('navbar');
            if (navbar) {
                window.addEventListener('scroll', () => {
                    if (window.scrollY > 50) {
                        navbar.classList.add('bg-black', 'shadow-lg', 'py-2');
                        navbar.classList.remove('bg-transparent', 'py-4');
                    } else {
                        navbar.classList.add('bg-transparent', 'py-4');
                        navbar.classList.remove('bg-black', 'shadow-lg', 'py-2');
                    }
                });

                // --- Mobile Menu Toggle ---
                const btn = document.getElementById('mobile-menu-btn');
                const menu = document.getElementById('mobile-menu');

                if (btn && menu) {
                    btn.addEventListener('click', () => {
                        menu.classList.toggle('hidden');
                        menu.classList.toggle('flex');
                    });

                    menu.querySelectorAll('a').forEach(link => {
                        link.addEventListener('click', () => {
                            menu.classList.add('hidden');
                            menu.classList.remove('flex');
                        });
                    });
                }
            }

            // --- Gallery Filtering ---
            const filterBtns = document.querySelectorAll('.filter-btn');
            const galleryItems = document.querySelectorAll('.gallery-item');

            if (filterBtns.length > 0) {
                filterBtns.forEach(btn => {
                    btn.addEventListener('click', () => {
                        filterBtns.forEach(b => b.classList.remove('active'));
                        btn.classList.add('active');

                        const filterValue = btn.getAttribute('data-filter');

                        galleryItems.forEach(item => {
                            if (filterValue === 'all' || item.getAttribute('data-category') === filterValue) {
                                item.classList.remove('hidden');
                                item.classList.add('block');
                                item.classList.remove('fade-in', 'visible');
                                void item.offsetWidth; // Trigger reflow
                                item.classList.add('fade-in', 'visible');
                            } else {
                                item.classList.remove('block');
                                item.classList.add('hidden');
                            }
                        });
                    });
                });
            }

            // --- Lightbox ---
            const lightbox = document.getElementById('lightbox');
            if (lightbox) {
                const lightboxImg = document.getElementById('lightbox-img');
                const closeLightbox = document.getElementById('close-lightbox');
                const lightboxCaption = document.getElementById('lightbox-caption');

                // Expose to window so onclick="openLightbox(this)" works
                window.openLightbox = function (element) {
                    let img, title;
                    if (element.tagName === 'IMG') {
                        img = element;
                        title = element.alt;
                    } else {
                        img = element.querySelector('img');
                        const titleEl = element.querySelector('h3');
                        title = titleEl ? titleEl.innerText : '';
                    }

                    if (lightboxImg) lightboxImg.src = img.src;
                    if (lightboxCaption) lightboxCaption.innerText = title;
                    lightbox.classList.remove('hidden');
                    lightbox.classList.add('flex');
                    setTimeout(() => lightbox.classList.remove('opacity-0'), 10);
                };

                if (closeLightbox) {
                    closeLightbox.addEventListener('click', () => {
                        lightbox.classList.add('opacity-0');
                        setTimeout(() => {
                            lightbox.classList.add('hidden');
                            lightbox.classList.remove('flex');
                        }, 300);
                    });
                }

                lightbox.addEventListener('click', (e) => {
                    if (e.target === lightbox && closeLightbox) closeLightbox.click();
                });
            }

            // --- Dynamic Subject Input ---
            const subjectSelect = document.getElementById('subjectSelect');
            const otherSubjectGroup = document.getElementById('otherSubjectGroup');

            if (subjectSelect && otherSubjectGroup) {
                subjectSelect.addEventListener('change', () => {
                    if (subjectSelect.value === 'Jiné') {
                        otherSubjectGroup.classList.remove('hidden');
                        otherSubjectGroup.querySelector('input').setAttribute('required', 'true');
                    } else {
                        otherSubjectGroup.classList.add('hidden');
                        otherSubjectGroup.querySelector('input').removeAttribute('required');
                    }
                });
            }

            // --- Contact Form ---
            const form = document.getElementById('contactForm');
            const successMsg = document.getElementById('successMessage');

            if (form && successMsg) {
                form.addEventListener('submit', (e) => {
                    e.preventDefault();
                    form.classList.add('hidden');
                    successMsg.classList.remove('hidden');
                });

                // Expose resetForm to window
                window.resetForm = function () {
                    form.reset();
                    successMsg.classList.add('hidden');
                    form.classList.remove('hidden');
                }
            }


            // --- Scroll Animation ---
            const observerOptions = { threshold: 0.1 };
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) entry.target.classList.add('visible');
                });
            }, observerOptions);

            document.querySelectorAll('.fade-in').forEach(el => observer.observe(el));
        }

        // Start loading
        document.addEventListener('DOMContentLoaded', loadComponents);
    </script>


</body>

</html>