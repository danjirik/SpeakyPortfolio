<!DOCTYPE html>
<html lang="cs" class="scroll-smooth">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jan Spilka | Fotograf & Videotvůrce</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Fonts -->
    <link
        href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600&family=Playfair+Display:ital,wght@0,400;0,700;1,400&display=swap"
        rel="stylesheet">
    <!-- Font Awesome Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'gold': '#D4AF37',
                        'dark-bg': '#0f0f0f',
                        'card-bg': '#1a1a1a',
                        'card-hover': '#252525',
                    },
                    fontFamily: {
                        sans: ['Montserrat', 'sans-serif'],
                        serif: ['Playfair Display', 'serif'],
                    }
                }
            }
        }
    </script>
    <style>
        /* Custom scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: #0f0f0f;
        }

        ::-webkit-scrollbar-thumb {
            background: #333;
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #D4AF37;
        }

        .image-hover-zoom {
            transition: transform 0.5s ease;
        }

        .group:hover .image-hover-zoom {
            transform: scale(1.05);
        }

        /* Fade in animation classes */
        .fade-in {
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.6s ease-out, transform 0.6s ease-out;
        }

        .fade-in.visible {
            opacity: 1;
            transform: translateY(0);
        }

        /* Gallery Filter Active State */
        .filter-btn.active {
            background-color: #D4AF37;
            color: black;
            border-color: #D4AF37;
        }
    </style>
</head>

<body class="bg-dark-bg text-gray-200 font-sans antialiased">

    <!-- Navigation -->
    <div data-include="components/navbar.html"></div>

    <!-- Hero Section -->
    <div data-include="components/hero.html"></div>

    <!-- About Section -->
    <div data-include="components/about.html"></div>

    <!-- Process Section -->
    <div data-include="components/process.html"></div>

    <!-- Calendars Section -->
    <div data-include="components/calendars.html"></div>

    <!-- Services / Prices Section -->
    <div data-include="components/services.html"></div>

    <!-- Testimonials Section -->
    <div data-include="components/testimonials.html"></div>

    <!-- Gallery Section -->
    <div data-include="components/gallery.html"></div>

    <!-- FAQ Section -->
    <div data-include="components/faq.html"></div>

    <!-- Blog Section -->
    <div data-include="components/blog.html"></div>

    <!-- Contact Section -->
    <div data-include="components/contact.html"></div>

    <!-- Footer -->
    <div data-include="components/footer.html"></div>

    <!-- Modals -->
    <div data-include="components/modals.html"></div>

    <script>
        // --- Component Loader ---
        async function loadComponents() {
            const includes = document.querySelectorAll('[data-include]');
            for (const el of includes) {
                try {
                    const file = el.getAttribute('data-include');
                    const response = await fetch(file);
                    if (response.ok) {
                        el.innerHTML = await response.text();
                        // Unwrap the div to avoid extra container if preferred, 
                        // but keeping it acts as a wrapper.
                        // For this layout, wrapper divs might break layout if flex/grid is expected.
                        // Let's replace the placeholder with the content nodes.
                        const content = el.content; // text isn't content
                        // Actually, el.innerHTML = text puts elements inside the div.
                        // To preserve layout structure exactly as before, we might want to unwrap.
                        // However, 'main.html' had <nav>, <section> etc.
                        // So <div data-include> -> <section> is fine.
                        // <div data-include> might break some "child > *" selectors if any.
                        // Checking CSS... Tailwind classes usually on the element itself.
                        // "Navbar" is "fixed", so wrapping it in a relative/static div is OK 
                        // as long as the nav itself has 'fixed'.
                    } else {
                        console.error('Failed to load', file);
                    }
                } catch (e) {
                    console.error('Error loading component', e);
                }
            }

            // Re-initialize scripts after content is loaded
            initializeScripts();
        }

        function initializeScripts() {
            // --- Navbar Scroll Effect ---
            const navbar = document.getElementById('navbar');
            if (navbar) {
                window.addEventListener('scroll', () => {
                    if (window.scrollY > 50) {
                        navbar.classList.add('bg-black', 'shadow-lg', 'py-2');
                        navbar.classList.remove('bg-transparent', 'py-4');
                    } else {
                        navbar.classList.add('bg-transparent', 'py-4');
                        navbar.classList.remove('bg-black', 'shadow-lg', 'py-2');
                    }
                });

                // --- Mobile Menu Toggle ---
                const btn = document.getElementById('mobile-menu-btn');
                const menu = document.getElementById('mobile-menu');

                if (btn && menu) {
                    btn.addEventListener('click', () => {
                        menu.classList.toggle('hidden');
                        menu.classList.toggle('flex');
                    });

                    menu.querySelectorAll('a').forEach(link => {
                        link.addEventListener('click', () => {
                            menu.classList.add('hidden');
                            menu.classList.remove('flex');
                        });
                    });
                }
            }

            // --- Gallery Filtering ---
            const filterBtns = document.querySelectorAll('.filter-btn');
            const galleryItems = document.querySelectorAll('.gallery-item');

            if (filterBtns.length > 0) {
                filterBtns.forEach(btn => {
                    btn.addEventListener('click', () => {
                        filterBtns.forEach(b => b.classList.remove('active'));
                        btn.classList.add('active');

                        const filterValue = btn.getAttribute('data-filter');

                        galleryItems.forEach(item => {
                            if (filterValue === 'all' || item.getAttribute('data-category') === filterValue) {
                                item.classList.remove('hidden');
                                item.classList.add('block');
                                item.classList.remove('fade-in', 'visible');
                                void item.offsetWidth; // Trigger reflow
                                item.classList.add('fade-in', 'visible');
                            } else {
                                item.classList.remove('block');
                                item.classList.add('hidden');
                            }
                        });
                    });
                });
            }

            // --- Lightbox ---
            const lightbox = document.getElementById('lightbox');
            if (lightbox) {
                const lightboxImg = document.getElementById('lightbox-img');
                const closeLightbox = document.getElementById('close-lightbox');
                const lightboxCaption = document.getElementById('lightbox-caption');

                // Expose to window so onclick="openLightbox(this)" works
                window.openLightbox = function (element) {
                    let img, title;
                    if (element.tagName === 'IMG') {
                        img = element;
                        title = element.alt;
                    } else {
                        img = element.querySelector('img');
                        const titleEl = element.querySelector('h3');
                        title = titleEl ? titleEl.innerText : '';
                    }

                    if (lightboxImg) lightboxImg.src = img.src;
                    if (lightboxCaption) lightboxCaption.innerText = title;
                    lightbox.classList.remove('hidden');
                    lightbox.classList.add('flex');
                    setTimeout(() => lightbox.classList.remove('opacity-0'), 10);
                };

                if (closeLightbox) {
                    closeLightbox.addEventListener('click', () => {
                        lightbox.classList.add('opacity-0');
                        setTimeout(() => {
                            lightbox.classList.add('hidden');
                            lightbox.classList.remove('flex');
                        }, 300);
                    });
                }

                lightbox.addEventListener('click', (e) => {
                    if (e.target === lightbox && closeLightbox) closeLightbox.click();
                });
            }

            // --- Dynamic Subject Input ---
            const subjectSelect = document.getElementById('subjectSelect');
            const otherSubjectGroup = document.getElementById('otherSubjectGroup');

            if (subjectSelect && otherSubjectGroup) {
                subjectSelect.addEventListener('change', () => {
                    if (subjectSelect.value === 'Jiné') {
                        otherSubjectGroup.classList.remove('hidden');
                        otherSubjectGroup.querySelector('input').setAttribute('required', 'true');
                    } else {
                        otherSubjectGroup.classList.add('hidden');
                        otherSubjectGroup.querySelector('input').removeAttribute('required');
                    }
                });
            }

            // --- Contact Form ---
            const form = document.getElementById('contactForm');
            const successMsg = document.getElementById('successMessage');

            if (form && successMsg) {
                form.addEventListener('submit', (e) => {
                    e.preventDefault();
                    form.classList.add('hidden');
                    successMsg.classList.remove('hidden');
                });

                // Expose resetForm to window
                window.resetForm = function () {
                    form.reset();
                    successMsg.classList.add('hidden');
                    form.classList.remove('hidden');
                }
            }


            // --- Service Modal Logic ---
            const serviceData = {
                'weddings': {
                    title: 'Svatby',
                    description: 'Svatební fotografie je o zachycení emocí, lásky a neopakovatelných okamžiků. Mým cílem je vyprávět váš příběh tak, abyste si při prohlížení fotek i po letech vybavili přesně tu atmosféru, vůni květin a smích vašich blízkých. Nabízím komplexní pokrytí od příprav až po večerní zábavu, s důrazem na přirozenost a detaily.',
                    images: [
                        'images/svatba0.jpg',
                        'images/svatba1.jpg',
                        'images/svatba2.jpg',
                        'images/svatba3.jpg',
                        'images/svatba4.jpg'
                    ]
                },
                'pets': {
                    title: 'Focení mazlíčků',
                    description: 'Naši čtyřnozí přátelé jsou plnohodnotnými členy rodiny. Při focení mazlíčků se snažím zachytit jejich jedinečnou osobnost, ať už jde o akční záběry v běhu nebo klidné portréty. Mám trpělivost a zkušenosti s různými zvířaty, takže se nemusíte bát, že by váš parťák "nespolupracoval".',
                    images: [
                        'images/mazlicek.jpg',
                        'images/houbkalendarpreview1.jpg',
                        'images/houbkalendarpreview2.jpg'
                    ]
                },
                'product': {
                    title: 'Produktová fotografie',
                    description: 'Kvalitní prezentace je klíčem k prodeji. Nabízím profesionální produktové fotografie, které podtrhnou přednosti vašich výrobků. Ať už potřebujete čisté produktovky na e-shop nebo stylizované aranžované fotky na sociální sítě, společně vytvoříme vizuál, který zaujme.',
                    images: [
                        'images/produkt.jpg',
                        'images/fotografický_kalednář.jpg',
                        'images/fotokalendarpreview1.jpg'
                    ]
                },
                'portrait': {
                    title: 'Portrétní a párové',
                    description: 'Portrétní fotografie není jen o tom "vypadat dobře", ale především o tom cítit se dobře. Snažím se vytvořit uvolněnou atmosféru, kde můžete být sami sebou. Focení párů, rande, těhotenské nebo rodinné foto – vždy hledáme to nejlepší světlo a kompozici pro vaše vzpomínky.',
                    images: [
                        'images/portrét.jpeg',
                        'images/portfolio1.jpg',
                        'images/portfolio3.jpg',
                        'images/portfolio4.jpg'
                    ]
                }
            };

            const serviceModal = document.getElementById('service-modal');
            const closeServiceBtn = document.getElementById('close-service-modal');
            const modalTitle = document.getElementById('service-modal-title');
            const modalDesc = document.getElementById('service-modal-desc');
            const modalImages = document.getElementById('service-modal-images');

            if (serviceModal) {
                window.openServiceModal = function (serviceKey) {
                    const data = serviceData[serviceKey];
                    if (!data) return;

                    modalTitle.innerText = data.title;
                    modalDesc.innerText = data.description;

                    // Clear and populate images
                    modalImages.innerHTML = '';
                    data.images.forEach(imgSrc => {
                        const imgWrapper = document.createElement('div');
                        imgWrapper.className = 'rounded-lg overflow-hidden h-64 border border-gray-800 group relative';

                        const img = document.createElement('img');
                        img.src = imgSrc;
                        img.alt = data.title;
                        img.className = 'w-full h-full object-cover transition-transform duration-500 group-hover:scale-110';

                        // Optional: Allow lightbox opening from here too
                        imgWrapper.onclick = function () {
                            if (window.openLightbox) window.openLightbox(img);
                        };
                        imgWrapper.style.cursor = 'pointer';

                        imgWrapper.appendChild(img);
                        modalImages.appendChild(imgWrapper);
                    });

                    serviceModal.classList.remove('hidden');
                    serviceModal.classList.add('flex');
                    // Small delay for fade in
                    requestAnimationFrame(() => {
                        serviceModal.classList.remove('opacity-0');
                    });
                    // Prevent body scroll
                    document.body.style.overflow = 'hidden';
                };

                const closeService = () => {
                    serviceModal.classList.add('opacity-0');
                    setTimeout(() => {
                        serviceModal.classList.add('hidden');
                        serviceModal.classList.remove('flex');
                        document.body.style.overflow = '';
                    }, 300);
                };

                if (closeServiceBtn) {
                    closeServiceBtn.addEventListener('click', closeService);
                }

                // Close on click outside
                serviceModal.addEventListener('click', (e) => {
                    if (e.target === serviceModal) closeService();
                });

                // Close on ESC
                window.addEventListener('keydown', (e) => {
                    if (e.key === 'Escape' && !serviceModal.classList.contains('hidden')) {
                        closeService();
                    }
                });
            }

            // --- Scroll Animation ---
            const observerOptions = { threshold: 0.1 };
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) entry.target.classList.add('visible');
                });
            }, observerOptions);

            document.querySelectorAll('.fade-in').forEach(el => observer.observe(el));

            // --- FAQ Accordion ---
            window.toggleFaq = function (button) {
                const content = button.nextElementSibling;
                const icon = button.querySelector('i');

                // Toggle current
                if (content.style.height && content.style.height !== '0px') {
                    content.style.height = '0px';
                    icon.classList.remove('rotate-45');
                    icon.classList.remove('text-red-500'); // Optional: change color on active
                    icon.classList.add('text-gold');
                    button.classList.remove('bg-gray-800');
                } else {
                    content.style.height = content.scrollHeight + 'px';
                    icon.classList.add('rotate-45');
                    icon.classList.remove('text-gold');
                    icon.classList.add('text-white'); // Optional highlight
                    button.classList.add('bg-gray-800');
                }
            };
        }

        // Start loading
        document.addEventListener('DOMContentLoaded', loadComponents);
    </script>


</body>

</html>